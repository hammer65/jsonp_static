<link rel="import" href="../bower_components/polymer/polymer.html" />

<dom-module id="app-storage">
  <template>
    <style>
      :host{
        display:none;
      };
    </style>
  </template>
</dom-module>
<script>
  (function(){
    var _storage = [];
    var _changeName;

    Polymer({
      is: 'app-storage',
      properties:{
        name:{
          type: String
        }
      },
      ready:function(){
        _changeName = this.name + '-change';
      },
      set: function(id,newVal){
        if(_storage == null){
          _storage.save([]);
        }
        _storage[id] = newVal;
        var payload = {
          data:_storage,
          type:'set'
        };
        this.fire(_changeName,payload);
      },
      get: function(id){
        var payload = {
          data:_storage[id],
          type: "get"
        };
        this.fire(_changeName,payload);
      },
      getAll: function(){
        ret = [];
        if(_storage != null){
          ret = _storage;
        }
        var payload = {
          data: ret,
          type: 'all'
        };
        this.fire(_changeName,payload);
        return ret;
      },
      deleteItem:function(id){
        delete _storage[id];
        var payload = {
          data: _storage,
          type: 'delete'
        };
        this.fire(_changeName,payload)
      }
    });
  })();
    
</script>